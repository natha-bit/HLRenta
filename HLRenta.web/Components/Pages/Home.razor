@page "/"
@rendermode InteractiveServer
@using System.Text.Json
@using Microsoft.AspNetCore.Components.Forms     <!-- InputTime vive aquí -->
@inject IJSRuntime JS
@inject NavigationManager Nav

<section class="hero" id="inicio">
    <div class="hero-content">
        <div class="hero-text">
            <h1 class="hero-title">HL Rent Car</h1>
            <p class="hero-subtitle">
                Tu mejor opción para alquilar vehículos de calidad. Servicio confiable,
                precios competitivos y atención personalizada.
            </p>
        </div>

        <!-- ===== FORMULARIO ===== -->
        <div class="reservation-form" id="reservaciones">
            <h2 class="form-title">Reservar</h2>

            <EditForm Model="@reserva" OnValidSubmit="ProcesarReserva">
                <DataAnnotationsValidator />
                <ValidationSummary />

                <!-- Lugares -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Lugar de salida</label>
                        <select class="form-input" @bind="reserva.LugarSalida" required>
                            <option value="" disabled selected>Selecciona el lugar de salida</option>
                            <option value="oficina">Oficina</option>
                            <option value="parqueo">Parqueo</option>
                            <option value="recepción">Recepción</option>
                            <option value="entrada principal">Entrada Principal</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lugar de retorno</label>
                        <select class="form-input" @bind="reserva.LugarRetorno" required>
                            <option value="" disabled selected>Selecciona el lugar de retorno</option>
                            <option value="oficina">Oficina</option>
                            <option value="parqueo">Parqueo</option>
                            <option value="recepción">Recepción</option>
                            <option value="entrada principal">Entrada Principal</option>
                        </select>
                    </div>
                </div>

                <!-- Fechas -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Fecha de salida</label>
                        <input type="date" @bind="reserva.FechaSalida"
                                   TValue="DateOnly?"
                                   class="form-input"
                                   required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Fecha de retorno</label>
                        <input type="date" @bind="reserva.FechaRetorno"
                                   TValue="DateOnly?"
                                   class="form-input"
                                   required />
                    </div>
                </div>

                <!-- Horas -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Hora de salida</label>
                        <input type="time" @bind="reserva.HoraSalida"
                                   TValue="TimeOnly?"
                                   class="form-input"
                                   required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Hora de retorno</label>
                        <input type="time" @bind="reserva.HoraRetorno"
                                   TValue="TimeOnly?"
                                   class="form-input"
                                   required />
                    </div>
                </div>

                <div class="form-group full-width">
                    <button type="submit" class="submit-btn">Procesar</button>
                </div>
            </EditForm>
        </div>
    </div>
</section>

<!-- … sección de servicios sin cambios … -->

@code {
    private readonly ReservaModel reserva = new();

    private async Task ProcesarReserva()
    {
        var json = JsonSerializer.Serialize(reserva);
        await JS.InvokeVoidAsync("localStorage.setItem", "reservaInfo", json);
        Nav.NavigateTo("/reservar");
    }

    public class ReservaModel
    {
        public string?   LugarSalida  { get; set; }
        public string?   LugarRetorno { get; set; }

        public DateOnly? FechaSalida  { get; set; }   // ← DateOnly encaja con <InputDate>
        public DateOnly? FechaRetorno { get; set; }

        public TimeOnly? HoraSalida   { get; set; }   // ← TimeOnly encaja con <InputTime>
        public TimeOnly? HoraRetorno  { get; set; }
    }
}
